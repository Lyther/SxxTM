@distance = 50
@base_moon_distance = 10
@jumps = 3


sxx_ancient_forbidden_area = {
	name = "NAME_SXX_Ancient_Forbidden_Area"

	class = sc_black_hole
	asteroid_belt = {
		type = icy_asteroid_belt
		radius = 170
	}

	spawn_chance = 0 #？

	init_effect = {
		if = {
			limit = {
				is_inside_nebula = no
			}
			create_nebula = {
				radius = 1
			}
		}
		create_rare_nebula_1 = yes
	}

	flags = { sxx_forbidden_area cannot_be_hit_by_aow_starfall_spear }

	planet = {
		name = "NAME_SXX_Dark_Source"
		count = 1
		class = pc_black_hole
		orbit_distance = 0
		orbit_angle = 1
		size = 20
		has_ring = no

		init_effect = {
			prevent_anomaly = yes
			clear_deposits = yes
			create_country = {
				name = "NAME_SXX_Hostile"
				species = random
				type = sxx_hostile
				effect = {
					save_global_event_target_as = sxx_hostile_country
					prev = {
						create_sxx_fairy_ship_5 = yes
						last_created_ship = {
							save_global_event_target_as = sxx_hostile_ship_fairy_5
							ship_event = { id = sxx_event.520 days = 30 random = 10 }
						}
					}
				}
			}
			save_global_event_target_as = sxx_pool_star
		}
	}

	planet = {
		name = "NAME_SXX_Forbidden_1"
		class = random_non_colonizable
		orbit_distance = 40
		orbit_angle = { min = 90 max = 270 }
		has_ring = no

		init_effect = {
			prevent_anomaly = yes
			clear_deposits = yes
		}
	}

	planet = {
		name = "NAME_SXX_Forbidden_2"
		count = 1 #count = { min = 0 max = 1 }
		class = random_non_colonizable
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		init_effect = {
			prevent_anomaly = yes
			clear_deposits = yes
		}

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5

			init_effect = {
				prevent_anomaly = yes
				clear_deposits = yes
			}
		}
	}

	planet = {
		name = "NAME_SXX_Bones"
		class = pc_sxx_blessed_spot
		orbit_distance = 40
		orbit_angle = { min = 90 max = 270 }
		size = 25
		has_ring = no
		modifiers = none

		change_orbit = @base_moon_distance

		init_effect = {
			prevent_anomaly = yes
			clear_deposits = yes
			create_country = {
				name = "NAME_SXX_Memory_Pool"
				species = random
				type = sxx_memory_pool
				effect = {
					save_global_event_target_as = sxx_pool_country
				}
			}
			set_owner = event_target:sxx_pool_country
			create_pop = { species = owner_main_species }
			last_created_pop = {
				set_pop_flag = sxx_pool_pop_alive
			}
			save_global_event_target_as = sxx_pool_planet
		}

		moon = {
			name = "NAME_SXX_Silence_1"
			class = pc_sxx_blessed_spot
			size = 15
			orbit_distance = 8
			orbit_angle = { min = 90 max = 270 }
			has_ring = no
			modifiers = none

			init_effect = {
				prevent_anomaly = yes
				clear_deposits = yes
			}
		}

		moon = {
			name = "NAME_SXX_Silence_2"
			class = pc_sxx_blessed_spot
			size = 15
			orbit_distance = 8
			orbit_angle = { min = 90 max = 270 }
			has_ring = no
			modifiers = none

			init_effect = {
				prevent_anomaly = yes
				clear_deposits = yes
			}
		}

		moon = {
			name = "NAME_SXX_Silence_3"
			class = pc_sxx_blessed_spot
			size = 15
			orbit_distance = 8
			orbit_angle = { min = 90 max = 270 }
			has_ring = no
			modifiers = none

			init_effect = {
				prevent_anomaly = yes
				clear_deposits = yes
			}
		}
	}

	planet = {
		name = "NAME_SXX_Forbidden_3"
		count = 1
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
		orbit_distance = 40

		init_effect = {
			prevent_anomaly = yes
			clear_deposits = yes
		}
	}

	planet = {
		name = "NAME_SXX_Forbidden_4"
		count = 1
		class = random_non_colonizable
		orbit_distance = 60
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		init_effect = {
			prevent_anomaly = yes
			clear_deposits = yes
		}

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5

			init_effect = {
				prevent_anomaly = yes
				clear_deposits = yes
			}
		}
	}

	planet = {
		name = "NAME_SXX_White"
		count = 1
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }
		orbit_distance = 30
		size = 30
		has_ring = no
		entity = "gas_giant_02_entity"
		change_orbit = @base_moon_distance

		init_effect = {
			prevent_anomaly = yes
			clear_deposits = yes
		}

		moon = {
			count = { min = 2 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5

			init_effect = {
				prevent_anomaly = yes
				clear_deposits = yes
			}
		}
	}

	planet = {
		name = "NAME_SXX_Forbidden_5"
		count = 1
		class = random_non_colonizable
		orbit_distance = 30
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		init_effect = {
			prevent_anomaly = yes
			clear_deposits = yes
		}

		moon = {
			count = { min = 0 max = 2 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5

			init_effect = {
				prevent_anomaly = yes
				clear_deposits = yes
			}
		}
	}
}

sxx_douluo_system = {
	name = NAME_Douluo_Star
	class = sc_g
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	usage = misc_system_init
	usage_odds = {
		base = 100
		modifier = {
			factor = 0
			is_fe_cluster = yes
		}
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
	}

	max_instances = 1
	spawn_chance = 100 #50
	#scaled_spawn_chance = 8	# scales by galaxy size (1000 stars = 10x base)

	planet = {
		count = 1
		class = pc_g_star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no

		init_effect = {
			prevent_anomaly = yes
		}
	}

	change_orbit = 30

	planet = {
		count = 2
		class = random_non_colonizable
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		count = { min = 1 max = 4 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		class = random_non_colonizable
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = 1
		class = pc_continental
		size = 18
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		init_effect = {
			set_planet_flag = sxx_douluo_planet
			prevent_anomaly = yes
			add_modifier = { modifier = sxx_douluo_planet_modifier }
			create_species = {
				name = NAME_Douluo
				plural = NAME_Douluo_Plural
				class = "HUM"
				portrait = "human"
				traits = {
					trait = "trait_adaptive"
					trait = "trait_nomadic"
					trait = "trait_wasteful"
					trait = "trait_sxx_douluo"
				}
				homeworld = this
				effect = {
					save_global_event_target_as = sxx_douluo_species
				}
			}
			create_country = {
				name = random
				authority = random
				civics = {
					civic = civic_increasing_urbanization
					civic = civic_atmospheric_pollution
				}
				species = last_created_species
				ethos = {
					ethic = ethic_authoritarian
					ethic = ethic_fanatic_militarist
				}
				origin = origin_default_pre_ftl
				day_zero_contact = no
				type = primitive
			}
			last_created_country = {
				set_graphical_culture = industrial_01
				set_country_flag = machine_age
				set_country_flag = humans_machine_age
				set_pre_ftl_age = machine_age
			}
			set_owner = last_created_country

			create_pre_ftl_blockers = yes

			while = {
				count = 24
				create_pop = {
					species = last_created_species
				}
			}
			add_building = building_primitive_farm
			add_building = building_primitive_factory
			add_building = building_primitive_mine
			add_building = building_primitive_power_plant
			add_building = building_primitive_capital
			add_building = building_urban_dwellings
			random_owned_pop = {
				modify_species = {
					species = this
					remove_trait = trait_sxx_douluo
					add_trait = trait_sxx_douluo_god
					effect = {
						save_global_event_target_as = sxx_douluo_god_species
					}
				}
			}
		}

		moon = {
			count = 1
			class = pc_barren
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5

			init_effect = {
				prevent_anomaly = yes
			}
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		class = random_non_colonizable
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}
}


sxx_fallen_1 = {
	class = "rl_standard_stars"

	flags = { sxx_fallen_1_system }

	usage = misc_system_init
	usage_odds = {
		base = 99999
		modifier = {
			factor = 0
			is_fe_cluster = yes
		}
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
	}
	
	spawn_chance = 100

	max_instances = 1

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		name = "NAME_SXX_Above_Cloud"
		orbit_distance = 20
		class = pc_sxx_blessed_spot
		orbit_angle = { min = 90 max = 270 }
		size = 30
		deposit_blockers = none
		modifiers = none

		init_effect = {
			create_cluster = {
				id = fe2_cluster
				radius = 140
				center = this.solar_system
			}

			sxx_create_fallen_1_country = yes

			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			clear_deposits = yes

			set_owner = event_target:sxx_fallen_1
			set_controller = event_target:sxx_fallen_1
			set_capital = yes
			
			while = {
				count = 10
				add_district = district_generator
			}
			while = {
				count = 10
				add_district = district_mining
			}
			while = {
				count = 10
				add_district = district_farming
			}

			while = {
				count = 5
				remove_deposit = d_sxx_lingmai_1
				remove_deposit = d_sxx_lingmai_2
				remove_deposit = d_sxx_lingmai_3
				remove_deposit = d_sxx_lingmai_4
			}

			add_deposit = d_sxx_lingmai_3
			add_deposit = d_sxx_lingmai_3
			add_deposit = d_sxx_lingmai_3
			add_deposit = d_sxx_lingmai_3
			add_deposit = d_sxx_lingmai_4

			#add_building = building_system_capital
			add_building = building_sxx_zongmen_10
			add_building = building_sxx_liandanfang_4
			add_building = building_sxx_lianqishi_4
			add_building = building_sxx_stones_mine_4
			add_building = building_galactic_memorial_3
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_nourishment_center
			add_building = building_nourishment_center
			add_building = building_affluence_center
			add_building = building_affluence_center

			while = {
				count = 67
				create_pop = {
					species = owner_main_species
				}
			}
			sxx_planet_add_main_species_state_pop = { COUNT = 10 STATE = dujie STATE_VALUE = 9 }
			sxx_planet_add_main_species_state_pop = { COUNT = 30 STATE = dacheng STATE_VALUE = 8 }
			sxx_planet_add_main_species_state_pop = { COUNT = 116 STATE = heti STATE_VALUE = 7 }

			create_sxx_fallen_1_cultivator_fleet = yes
		}

		change_orbit = @base_moon_distance

		moon = {
			name = "NAME_SXX_Tianwu"
			class = "pc_broken"
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 6
			size = 20
			class = pc_sxx_blessed_spot
			deposit_blockers = none
			modifiers = none

			init_effect = {
				set_planet_flag = fallen_empire_world
				prevent_anomaly = yes
				clear_deposits = yes

				set_owner = event_target:sxx_fallen_1
				set_controller = event_target:sxx_fallen_1
				
				while = {
					count = 6
					add_district = district_generator
				}
				while = {
					count = 6
					add_district = district_mining
				}
				while = {
					count = 6
					add_district = district_farming
				}

				while = {
					count = 5
					remove_deposit = d_sxx_lingmai_1
					remove_deposit = d_sxx_lingmai_2
					remove_deposit = d_sxx_lingmai_3
					remove_deposit = d_sxx_lingmai_4
				}

				add_deposit = d_sxx_lingmai_3
				add_deposit = d_sxx_lingmai_3
				add_deposit = d_sxx_lingmai_4

				#add_building = building_system_capital
				add_building = building_sxx_zongmen_10
				add_building = building_sxx_xuefu_8
				add_building = building_sxx_stones_mine_4
				add_building = building_galactic_memorial_3
				add_building = building_fe_dome
				add_building = building_fe_dome
				add_building = building_class_4_singularity
				add_building = building_class_4_singularity
				add_building = building_dimensional_fabricator
				add_building = building_dimensional_fabricator
				add_building = building_nano_forge
				add_building = building_nano_forge

				while = {
					count = 43
					create_pop = {
						species = owner_main_species
					}
				}
				sxx_planet_add_main_species_state_pop = { COUNT = 5 STATE = dujie STATE_VALUE = 9 }
				sxx_planet_add_main_species_state_pop = { COUNT = 20 STATE = dacheng STATE_VALUE = 8 }
				sxx_planet_add_main_species_state_pop = { COUNT = 50 STATE = heti STATE_VALUE = 7 }
				sxx_planet_add_main_species_state_pop = { COUNT = 125 STATE = lianxu STATE_VALUE = 6 }

				create_sxx_fallen_1_cultivator_fleet = yes
			}
		}
	}

	planet = {
		orbit_distance = 30
		class = pc_shrouded
		orbit_angle = { min = 90 max = 270 }
		size = 24
		modifiers = none

		init_effect = {
			prevent_anomaly = yes
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		hyperlane_jumps = 1
		initializer = "sxx_fallen_orbitals_1"
	}
	neighbor_system = {
		hyperlane_jumps = 1
		initializer = "sxx_fallen_orbitals_2"
	}
}

sxx_fallen_orbitals_1 = {
	class = "rl_standard_stars"

	flags = { sxx_fallen_1_system }

	#spawn_chance = 100

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = { min = 2 max = 10 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		hyperlane_jumps = 1
		initializer = "sxx_fallen_col_1"
	}
	neighbor_system = {
		hyperlane_jumps = 1
		initializer = "sxx_fallen_col_2"
	}
}

sxx_fallen_orbitals_2 = {
	class = "rl_standard_stars"

	flags = { sxx_fallen_1_system }

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 30

	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		count = { min = 1 max = 4 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		hyperlane_jumps = 1
		initializer = "sxx_fallen_col_1"
	}
	neighbor_system = {
		hyperlane_jumps = 1
		initializer = "sxx_fallen_col_2"
	}
}

sxx_fallen_col_1 = {
	class = "rl_standard_stars"

	flags = { sxx_fallen_1_system }

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	change_orbit = 10

	planet = {
		count = 1
		orbit_distance = 20
		home_planet = yes
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 16
		deposit_blockers = none
		modifiers = none

		flags = { sxx_fallen_1_fringe_colony }

		init_effect = {
			prevent_anomaly = yes
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}
}

sxx_fallen_col_2 = {
	class = "rl_standard_stars"

	flags = { sxx_fallen_1_system }

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 115
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 60

	planet = {
		count = 1
		home_planet = yes
		class = pc_gaia
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
		size = { min = 16 max = 16 }
		deposit_blockers = none
		modifiers = none

		flags = { sxx_fallen_1_fringe_colony }

		init_effect = {
			prevent_anomaly = yes
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = 2
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	change_orbit = 15

	planet = {
		count = { min = 2 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 110 }
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}
}

sxx_fallen_1_seal_system = {
	class = sc_black_hole
	name = "NAME_SXX_Seal_System"

	flags = { sxx_fallen_1_system sxx_seal_system }

	init_effect = {
		save_global_event_target_as = sxx_seal_system
	}

	planet = {
		count = 1
		class = pc_black_hole
		orbit_distance = 0
		orbit_angle = 1
		size = 20
		has_ring = no
		init_effect = {
			clear_deposits = yes
			prevent_anomaly = yes
			while = {
				count = 3
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 3
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 60
						angle = random
					}
				}
			}
			while = {
				count = 3
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 75
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 60
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 75
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 60
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 75
						angle = random
					}
				}
			}
			while = {
				count = 30
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 30
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 60
						angle = random
					}
				}
			}
			while = {
				count = 30
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 75
						angle = random
					}
				}
			}
		}
	}

	change_orbit = 50

	planet = {
		count = 1
		class = pc_shattered
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }
		has_ring = no
		modifiers = none

		change_orbit = 10

		init_effect = {
			clear_deposits = yes
			prevent_anomaly = yes
		}

		moon = {
			count = { min = 0 max = 2 }
			class = pc_shattered
			orbit_distance = 5
			orbit_angle = { min = 90 max = 270 }
			has_ring = no
			modifiers = none

			init_effect = {
				clear_deposits = yes
				prevent_anomaly = yes
			}
		}
	}

	planet = {
		class = pc_nuked
		name = "NAME_SXX_Seal"
		orbit_distance = 30
		orbit_angle = { min = 90 max = 270 }
		change_orbit = 15
		size = 25
		has_ring = no
		modifiers = none
		flags = { sxx_seal }

		init_effect = {
			clear_deposits = yes
			prevent_anomaly = yes
			add_deposit = d_sxx_seal
			save_global_event_target_as = sxx_seal_planet
			set_owner = event_target:sxx_fallen_1
			sxx_planet_add_main_species_state_pop = { COUNT = 20 STATE = dujie STATE_VALUE = 9 }
			create_sxx_fallen_1_cultivator_fleet = yes
			create_sxx_fallen_1_cultivator_fleet = yes
			while = {
				count = 5
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 10
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 20
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 30
						angle = random
					}
				}
			}
			while = {
				count = 5
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 40
						angle = random
					}
				}
			}
			while = {
				count = 2
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 10
						angle = random
					}
				}
			}
			while = {
				count = 20
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 20
						angle = random
					}
				}
			}
			while = {
				count = 20
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 30
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 40
						angle = random
					}
				}
			}
			while = {
				count = 5
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 10
						angle = random
					}
				}
			}
			while = {
				count = 20
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 20
						angle = random
					}
				}
			}
			while = {
				count = 20
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 30
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 40
						angle = random
					}
				}
			}
			while = {
				count = 5
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 10
						angle = random
					}
				}
			}
			while = {
				count = 20
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 20
						angle = random
					}
				}
			}
			while = {
				count = 20
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 30
						angle = random
					}
				}
			}
			while = {
				count = 10
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 40
						angle = random
					}
				}
			}
			while = {
				count = 5
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
			}
		}

		moon = {
			count = 1
			name = "NAME_SXX_Seal_Moon_1"
			class = pc_shattered
			orbit_distance = 5
		    orbit_angle = { min = 90 max = 270 }
			size = 10
			has_ring = no
			init_effect = {
				clear_deposits = yes
				prevent_anomaly = yes
			}
		}

		moon = {
			count = 1
			name = "NAME_SXX_Seal_Moon_2"
			class = pc_shattered
			orbit_distance = 0
		    orbit_angle = 45
			size = 10
			has_ring = no
			init_effect = {
				clear_deposits = yes
				prevent_anomaly = yes
			}
		}

		moon = {
			count = 1
			name = "NAME_SXX_Seal_Moon_3"
			class = pc_broken
			orbit_distance = 0
		    orbit_angle = 45
			size = 10
			has_ring = no
			init_effect = {
				clear_deposits = yes
				prevent_anomaly = yes
			}
		}

		moon = {
			count = 1
			name = "NAME_SXX_Seal_Moon_4"
			class = pc_shattered
			orbit_distance = 0
		    orbit_angle = 45
			size = 10
			has_ring = no
			init_effect = {
				clear_deposits = yes
				prevent_anomaly = yes
			}
		}

		moon = {
			count = 1
			name = "NAME_SXX_Seal_Moon_5"
			class = pc_shattered
			orbit_distance = 0
		    orbit_angle = 45
			size = 10
			has_ring = no
			init_effect = {
				clear_deposits = yes
				prevent_anomaly = yes
			}
		}

		moon = {
			count = 1
			name = "NAME_SXX_Seal_Moon_6"
			class = pc_shattered
			orbit_distance = 0
		    orbit_angle = 45
			size = 10
			has_ring = no
			init_effect = {
				clear_deposits = yes
				prevent_anomaly = yes
			}
		}

		moon = {
			count = 1
			name = "NAME_SXX_Seal_Moon_7"
			class = pc_broken
			orbit_distance = 0
		    orbit_angle = 45
			size = 10
			has_ring = no
			init_effect = {
				clear_deposits = yes
				prevent_anomaly = yes
			}
		}

		moon = {
			count = 1
			name = "NAME_SXX_Seal_Moon_8"
			class = pc_broken
			orbit_distance = 0
		    orbit_angle = 45
			size = 10
			has_ring = no
			init_effect = {
				clear_deposits = yes
				prevent_anomaly = yes
			}
		}
	}

	planet = {
		count = 1
		class = pc_shattered
		orbit_distance = 30
		orbit_angle = { min = 90 max = 270 }
		has_ring = no
		modifiers = none

		init_effect = {
			clear_deposits = yes
			prevent_anomaly = yes
		}
	}

	planet = {
		count = 2
		class = pc_shattered
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }
		has_ring = no
		modifiers = none

		change_orbit = 10

		init_effect = {
			clear_deposits = yes
			prevent_anomaly = yes
		}

		moon = {
			count = { min = 0 max = 2 }
			class = pc_shattered
			orbit_distance = 5
			orbit_angle = { min = 90 max = 270 }
			has_ring = no
			modifiers = none

			init_effect = {
				clear_deposits = yes
				prevent_anomaly = yes
			}
		}
	}
}

sxx_evil_invasion_home_system_init = { # Aix - Empire Capital
	class = "rl_standard_stars"

	usage = misc_system_init
	usage_odds = {
		base = -0.5
		complex_trigger_modifier = {
			trigger = count_country
			parameters = {
				limit = {
					is_country_type = default
					#is_ai = yes
				}
			}
			mode = add
			mult = 0.5
		}
		modifier = {
			any_playable_country = {
				is_sxx_sect = yes
				#is_ai = yes
				NOT = {
					has_valid_civic = civic_sxx_evil_way
				}
			}
			factor = 2
		}
		modifier = {
			any_playable_country = {
				is_sxx_sect = yes
				#is_ai = yes
				has_valid_civic = civic_sxx_evil_way
			}
			factor = 2
		}
		modifier = { # Making sure it isn't close to anything important
			factor = 0
			closest_system = {
				limit = {
					OR = {
						has_star_flag = empire_home_system
						has_star_flag = neighbor_t1_first_colony
						has_star_flag = neighbor_t2_second_colony
						has_star_flag = marauder_system
						has_star_flag = sxx_fallen_1_system
						AND = {
							has_owner = yes
							owner = { is_country_type = fallen_empire }
						}
					}
				}
				min_steps = 1
				max_steps = 2
			}
		}
		modifier = { # Reducing factors, rather than outright blocking them
			factor = 0.2
			closest_system = {
				limit = {
					OR = {
						has_star_flag = neighbor_t1
						has_star_flag = neighbor_t2
						has_star_flag = enclave
						has_star_flag = crystal_system
						has_star_flag = caravaneer_home
					}
				}
				min_steps = 1
				max_steps = 2
			}
		}
	}
	max_instances = 1
	#spawn_chance = 100

	flags = { sxx_evil_invasion_home_system sxx_evil_invasion_system }

	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = 30
		has_ring = no

		init_effect = {
			clear_deposits = yes
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		class = pc_asteroid
		orbit_distance = 30
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 30
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = 10

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 30
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = 10

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = { # Colonizeable Planet
		name = "NAME_SXX_Xuejiange"
		class = pc_sxx_blessed_spot
		orbit_distance = 20
		orbit_angle = 150
		size = 30
		has_ring = no
		deposit_blockers = none
		modifiers = none

		init_effect = {
			save_global_event_target_as = sxx_evil_invasion_homeland
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = random
				homeworld = this
				traits = {
					ideal_planet_class = pc_continental
					trait = trait_sxx_tianshengliandanshi
					trait = trait_sxx_yuwangchanshen
					trait = trait_sxx_jigongjinli
					trait = trait_sxx_wuxinggaochao
					trait = trait_unruly
				}
				effect = {
					save_global_event_target_as = sxx_evil_invasion_species
				}
			}
			create_country = {
				name = "NAME_SXX_Xueshayuan"
				authority = auth_sxx_sect
				species = event_target:sxx_evil_invasion_species
				type = default
				civics = {
					civic = civic_sxx_evil_way
					civic = civic_sxx_pills_master
					civic = civic_barbaric_despoilers
				}
				ethos = {
					ethic = ethic_xenophobe
					ethic = ethic_militarist
					ethic = ethic_authoritarian
				}
				flag = {
					icon= {
						category = "domination"
						file = "domination_21.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"red"
						"red"
						"null"
						"null"
					}
				}
				origin = origin_sxx_evil_invasion

				effect = {
					room_name_override = "personality_fanatic_purifier_room"

					save_global_event_target_as = sxx_evil_invasion_country

					set_country_flag = ai_no_wars

					add_modifier = { modifier = sxx_huashen_country }
					add_modifier = { modifier = sxx_evil_invasion_modifier }
					#add_modifier = { modifier = sxx_evil_invasion_begin_modifier days = 360 } # 整理开局状况

					begin_event_chain = {
						event_chain = sxx_cultivation_data_chain
					}

					sxx_get_practice_effect = { NUM = 2 LEVEL = 1 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 2 LEVEL = 2 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 2 LEVEL = 3 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 2 LEVEL = 4 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 2 LEVEL = 5 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 3 LEVEL = 1 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 3 LEVEL = 2 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 3 LEVEL = 3 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 3 LEVEL = 4 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 3 LEVEL = 5 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 4 LEVEL = 1 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 4 LEVEL = 2 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 4 LEVEL = 3 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 4 LEVEL = 4 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 4 LEVEL = 5 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 6 LEVEL = 1 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 6 LEVEL = 2 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 6 LEVEL = 3 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 6 LEVEL = 4 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 6 LEVEL = 5 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 7 LEVEL = 1 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 7 LEVEL = 2 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 7 LEVEL = 3 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 7 LEVEL = 4 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 7 LEVEL = 5 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 8 LEVEL = 1 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 8 LEVEL = 2 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 8 LEVEL = 3 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 8 LEVEL = 4 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 8 LEVEL = 5 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 9 LEVEL = 1 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 9 LEVEL = 2 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 9 LEVEL = 3 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 9 LEVEL = 4 GONGFA = 0 }
					sxx_get_practice_effect = { NUM = 9 LEVEL = 5 GONGFA = 0 }
					sxx_main_practice_select_effect = { NUM = 3 }

					# Fleets
					create_fleet = {
						effect = {
							set_owner = event_target:sxx_evil_invasion_country
							create_ship = {
								name = random
								random_existing_design = constructor
							}
							set_location = event_target:sxx_evil_invasion_country.capital_star
						}
					}

					create_fleet = {
						effect = {
							set_owner = event_target:sxx_evil_invasion_country
							create_ship = {
								name = random
								random_existing_design = science
							}
							set_location = event_target:sxx_evil_invasion_country.capital_star
							save_event_target_as = new_science_ship_target
						}
					}
					create_leader = {
						name = random
						species = event_target:sxx_evil_invasion_country.species
						class = scientist
						skill = 3
					}
					event_target:new_science_ship_target = {
						assign_leader = last_created_leader
					}

					# Tech
					give_physics_tech_tier_1_effect = yes
					give_physics_tech_tier_2_effect = yes
					give_engineering_tech_tier_1_effect = yes
					give_engineering_tech_tier_2_effect = yes
					give_society_tech_tier_1_effect = yes
					give_society_tech_tier_2_effect = yes
					give_technology = { tech = tech_hyper_drive_3 }
					give_technology = { tech = tech_gateway_activation }
					
					give_sxx_huashen_techs = yes

					# Resources
					add_basic_resources_effect = { VALUE = 3000 }
					add_manufactured_resources_effect = { VALUE = 1500 }
					add_advanced_resources_effect = { VALUE = 1000 }

					while = {
						count = 4
						create_fleet = {
							effect = {
								set_owner = event_target:sxx_evil_invasion_country
								while = {
									count = 10
									create_ship = {
										name = random
										random_existing_design = destroyer
									}
								}
								set_location = event_target:sxx_evil_invasion_country.capital_star
							}
						}
					}
				}
			}
			set_owner = event_target:sxx_evil_invasion_country
			set_controller = event_target:sxx_evil_invasion_country
			set_capital = yes

			while = {
				count = 5
				add_district = district_city
			}
			while = {
				count = 11
				add_district = district_industrial
			}
			while = {
				count = 10
				add_district = district_mining
			}
			while = {
				count = 10
				add_district = district_sxx_lingyao
			}

			clear_deposits = yes

			#add_deposit = d_sxx_lingtian # 开局会加
			#add_deposit = d_sxx_mijing
			#add_deposit = d_sxx_lingmai_4 # 开局加，防止地块被清

			remove_all_buildings = yes
			add_building = building_major_capital
			add_building = building_sxx_zongmen_5
			add_building = building_sxx_xuefu_3
			#add_building = building_sxx_xuemingbei # 开局加，防止触发血祭
			#add_building = building_sxx_shengxiantai # 开局会加
			add_building = building_sxx_liandanfang_2
			add_building = building_sxx_lianqishi_2
			#add_building = building_sxx_stones_mine_4 # 开局加，防止地块被清
			add_building = building_sxx_stones_energy_plant
			add_building = building_sxx_pills_processing_center
			add_building = building_hyper_entertainment_forum
			add_building = building_hospital

			validate_planet_buildings_and_districts = yes

			while = {
				count = 60
				create_pop = {
					species = owner_main_species
				}
			}
			sxx_planet_add_main_species_state_pop = { COUNT = 20 STATE = lianqi STATE_VALUE = 1 }
			sxx_planet_add_main_species_state_pop = { COUNT = 50 STATE = zhuji STATE_VALUE = 2 }
			sxx_planet_add_main_species_state_pop = { COUNT = 30 STATE = jindan STATE_VALUE = 3 }
			sxx_planet_add_main_species_state_pop = { COUNT = 10 STATE = yuanying STATE_VALUE = 4 }
			sxx_planet_add_main_species_state_pop = { COUNT = 1 STATE = huashen STATE_VALUE = 5 }
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 30
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = 10

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		class = pc_asteroid
		orbit_distance = 25
		orbit_angle = { min = 40 max = 100 }
	}

	init_effect = {
		create_starbase = {
			size = "starbase_starhold"
			owner = event_target:sxx_evil_invasion_country

			module = "shipyard"
			module = "shipyard"
			module = "anchorage"
			module = "anchorage"

			building = "hydroponics_bay"
			building = "naval_logistics_office"
		}
		generate_home_system_resources = yes
		every_system_planet = {
			limit = {
				has_deposit_for = shipclass_mining_station
				has_mining_station = no
			}
			create_mining_station = {
				owner = event_target:sxx_evil_invasion_country
			}
		}
		every_system_planet = {
			limit = {
				has_deposit_for = shipclass_research_station
				has_research_station = no
			}
			create_research_station = {
				owner = event_target:sxx_evil_invasion_country
			}
		}
	}

	neighbor_system = {
		hyperlane_jumps = 1
		initializer = "sxx_evil_invasion_system_1_init"
	}
}

sxx_evil_invasion_system_1_init = {
	class = "rl_standard_stars"

	flags = { sxx_evil_invasion_system }

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 35
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 30

	planet = {
		count = 2
		class = pc_asteroid
		orbit_distance = { min = 1 max = 2 }
		orbit_angle = { min = 40 max = 100 }
		size = 2
	}

	planet = { # Colonizeable Planet
		name = "NAME_SXX_Xueshifang"
		class = pc_city
		orbit_distance = 20
		orbit_angle = 150
		size = 18
		has_ring = no
		deposit_blockers = none
		modifiers = none

		init_effect = {
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = random
				homeworld = this
				traits = {
					ideal_planet_class = pc_continental
					trait = trait_sxx_lingqiqinhe
					trait = trait_sxx_jiaotashidi
					trait = trait_docile
					trait = trait_slow_breeders
				}
				effect = {
					save_event_target_as = sxx_evil_invasion_slave_species
				}
			}

			set_owner = event_target:sxx_evil_invasion_country
			set_controller = event_target:sxx_evil_invasion_country

			while = {
				count = 10
				add_district = district_sxx_arcology_stones_making
			}

			clear_deposits = yes
			add_deposit = d_sxx_lingmai_3

			remove_all_buildings = yes
			add_building = building_major_capital
			add_building = building_sxx_zongmen_4
			add_building = building_sxx_xuefu_2
			add_building = building_sxx_shengxiantai
			add_building = building_sxx_liandanfang_2
			add_building = building_sxx_lianqishi_2
			add_building = building_sxx_stones_energy_plant
			add_building = building_sxx_pills_processing_center
			add_building = building_sxx_stones_mine_3
			add_building = building_crystal_plant
			add_building = building_crystal_plant
			#add_building = building_hyper_entertainment_forum
			add_building = building_hospital

			validate_planet_buildings_and_districts = yes

			while = {
				count = 10
				create_pop = {
					species = event_target:sxx_evil_invasion_species
				}
			}
			while = {
				count = 5
				create_pop = {
					species = event_target:sxx_evil_invasion_slave_species
				}
			}

			while = {
				count = 50
				create_pop = {
					species = event_target:sxx_evil_invasion_slave_species
					effect = {
						set_pop_flag = sxx_jindan set_variable = { which = sxx_pop_state value = 3 }
						modify_species = {
							species = this
							add_trait = trait_sxx_jindan
						}
					}
				}
			}
			while = {
				count = 5
				create_pop = {
					species = event_target:sxx_evil_invasion_slave_species
					effect = {
						set_pop_flag = sxx_yuanying set_variable = { which = sxx_pop_state value = 4 }
						modify_species = {
							species = this
							add_trait = trait_sxx_yuanying
						}
					}
				}
			}
			sxx_planet_add_main_species_state_pop = { COUNT = 10 STATE = lianqi STATE_VALUE = 1 }
			sxx_planet_add_main_species_state_pop = { COUNT = 30 STATE = zhuji STATE_VALUE = 2 }
			sxx_planet_add_main_species_state_pop = { COUNT = 15 STATE = jindan STATE_VALUE = 3 }
			sxx_planet_add_main_species_state_pop = { COUNT = 5 STATE = yuanying STATE_VALUE = 4 }
		}
	}

	planet = {
		count = { min = 2 max = 3 }
		orbit_distance = 30
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = 10

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 2 max = 3 }
		orbit_distance = 30
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = 10

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 2 max = 3 }
		class = pc_asteroid
		orbit_distance = 25
		orbit_angle = { min = 40 max = 100 }
	}

	init_effect = {
		create_starbase = {
			size = "starbase_starhold"
			owner = event_target:sxx_evil_invasion_country

			module = "shipyard"
			module = "shipyard"
			module = "anchorage"
			module = "anchorage"

			building = "hydroponics_bay"
			building = "naval_logistics_office"
		}
		generate_home_system_resources = yes
		every_system_planet = {
			limit = {
				has_deposit_for = shipclass_mining_station
				has_mining_station = no
			}
			create_mining_station = {
				owner = event_target:sxx_evil_invasion_country
			}
		}
		every_system_planet = {
			limit = {
				has_deposit_for = shipclass_research_station
				has_research_station = no
			}
			create_research_station = {
				owner = event_target:sxx_evil_invasion_country
			}
		}
	}
}

sxx_heaven_fall_system_init = {
	class = "rl_standard_stars"

	usage = misc_system_init
	usage_odds = {
		base = 0
		modifier = {
			add = 99999
			any_neighbor_system = {
				any_system_colony = {
					owner = { has_origin = origin_sxx_heaven_fall }
				}
			}
		}
	}
	max_instances = 1

	flags = { sxx_heaven_fall_system cannot_be_hit_by_aow_starfall_spear }

	prevent_anomalies = yes

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 40
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 60
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 70
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 80
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 90
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 100
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 110
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 120
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 130
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 140
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 150
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 160
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 170
	}
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 180
	}
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 190
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 35

	planet = {
		count = 5
		class = pc_asteroid
		orbit_distance = 10
		orbit_angle = { min = 40 max = 100 }
		init_effect = {
			clear_deposits = yes
			random_list = {
				100 = { add_deposit = d_sxx_stones_2 }
				80 = { add_deposit = d_sxx_stones_4 }
				60 = { add_deposit = d_sxx_stones_6 }
				40 = { add_deposit = d_sxx_stones_8 }
				20 = { add_deposit = d_sxx_stones_10 }
				20 = { add_deposit = d_sxx_gongfa_1 }
				16 = { add_deposit = d_sxx_gongfa_2 }
				12 = { add_deposit = d_sxx_gongfa_3 }
				8 = { add_deposit = d_sxx_gongfa_4 }
				4 = { add_deposit = d_sxx_gongfa_5 }
			}
		}
	}

	planet = {
		class = pc_asteroid
		orbit_distance = 10
		orbit_angle = { min = 40 max = 100 }
		init_effect = {
			clear_deposits = yes
			random_list = {
				100 = { add_deposit = d_sxx_stones_2 }
				80 = { add_deposit = d_sxx_stones_4 }
				60 = { add_deposit = d_sxx_stones_6 }
				40 = { add_deposit = d_sxx_stones_8 }
				20 = { add_deposit = d_sxx_stones_10 }
				20 = { add_deposit = d_sxx_gongfa_1 }
				16 = { add_deposit = d_sxx_gongfa_2 }
				12 = { add_deposit = d_sxx_gongfa_3 }
				8 = { add_deposit = d_sxx_gongfa_4 }
				4 = { add_deposit = d_sxx_gongfa_5 }
			}
			set_planet_flag = sxx_old_heaven_spawn_target
		}
	}

	planet = {
		count = 9
		class = pc_asteroid
		orbit_distance = 10
		orbit_angle = { min = 40 max = 100 }
		init_effect = {
			clear_deposits = yes
			random_list = {
				100 = { add_deposit = d_sxx_stones_2 }
				80 = { add_deposit = d_sxx_stones_4 }
				60 = { add_deposit = d_sxx_stones_6 }
				40 = { add_deposit = d_sxx_stones_8 }
				20 = { add_deposit = d_sxx_stones_10 }
				20 = { add_deposit = d_sxx_gongfa_1 }
				16 = { add_deposit = d_sxx_gongfa_2 }
				12 = { add_deposit = d_sxx_gongfa_3 }
				8 = { add_deposit = d_sxx_gongfa_4 }
				4 = { add_deposit = d_sxx_gongfa_5 }
			}
		}
	}

	init_effect = {
		random_system_planet = {
			create_archaeological_site = site_sxx_sea_of_asteroid
		}
	}
}