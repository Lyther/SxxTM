namespace = sxx_origin

# 起源开局效果
country_event = {
	id = sxx_origin.1

	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_sxx_sect = yes
		is_sxx_fallen_1 = no
	}

	immediate = {
		### 魔怔 ###
		if = {
			limit = {
				has_valid_civic = civic_sxx_mozheng
			}
			set_country_flag = sxx_test_break
			country_event = { id = sxx_test.5 days = 8 }
			add_resource = {
				sxx_stones = 50000
				sxx_pills = 15000
				sxx_gongfa = 500000000
			}
			capital_scope = {
				sxx_planet_add_main_species_state_pop = { COUNT = 100 STATE = lianqi STATE_VALUE = 1 }
			}
		}
		############

		if = { # 天坠保底
			limit = {
				has_origin = origin_sxx_heaven_fall
				NOT = { any_system = { has_star_flag = sxx_heaven_fall_system } }
			}
			capital_scope.solar_system = {
				spawn_system = {
					min_distance = 20
					max_distance = 30
					max_jumps = 0
					initializer = sxx_heaven_fall_system_init
				}
			}
		}

		begin_event_chain = {
			event_chain = sxx_cultivation_data_chain
			target = ROOT
		}
		add_resource = {
			sxx_stones = 200
		}
		add_sxx_kuilei_species = yes

		switch = {
			trigger = has_origin
			origin_sxx_cultivator_family = {
				add_resource = {
					sxx_stones = 800
					sxx_pills = 100
					sxx_gongfa = 300
				}
				add_modifier = { modifier = sxx_jindan_country }
				give_technology = { message = no tech = tech_sxx_liandanfang_1 }
				give_technology = { message = no tech = tech_sxx_lianqishi_1 }
				capital_scope = {
					add_deposit = d_sxx_lingmai_3

					add_district = district_city

					add_building = building_sxx_zongmen_3
					add_building = building_sxx_stones_mine_3
					add_building = building_sxx_liandanfang_1
					add_building = building_sxx_lianqishi_1

					sxx_planet_add_main_species_state_pop = { COUNT = 25 STATE = lianqi STATE_VALUE = 1 }
					sxx_planet_add_main_species_state_pop = { COUNT = 5 STATE = zhuji STATE_VALUE = 2 }
					sxx_planet_add_main_species_state_pop = { COUNT = 1 STATE = jindan STATE_VALUE = 3 }
				}
				random_owned_leader = {
					limit = {
						is_ruler = yes
						NOT = { has_leader_flag = sxx_pop_leader }
					}
					sxx_leader_set_state = { STATE = jindan VAR = 3 }
				}
				while = {
					count = 5
					random_owned_leader = {
						limit = {
							is_ruler = no
							NOT = { has_leader_flag = sxx_pop_leader }
						}
						sxx_leader_set_state = { STATE = zhuji VAR = 2 }
					}
				}
				every_owned_leader = {
					limit = {
						is_ruler = no
						NOT = { has_leader_flag = sxx_pop_leader }
					}
					sxx_leader_set_state = { STATE = lianqi VAR = 1 }
				}
			}
			origin_sxx_yuanying = {
				add_modifier = { modifier = sxx_lianqi_country }
				capital_scope = {
					set_planet_size = 18
					clear_deposits = yes
					
					add_deposit = d_sxx_lingmai_4	
					add_building = building_sxx_zongmen_1
					add_building = building_sxx_stones_mine_4
					
					while = {
						count = 10
						random_owned_pop = {
							limit = { is_same_species = owner_main_species }
							kill_pop = yes
						}
					}
					sxx_planet_add_main_species_state_pop = { COUNT = 10 STATE = lianqi STATE_VALUE = 1 }
					sxx_planet_add_main_species_state_pop = { COUNT = 1 STATE = yuanying STATE_VALUE = 4 }
					last_created_pop = {
						sxx_pop_set_potential_depletion = yes
						add_modifier = { modifier = sxx_pop_yuanyinglaiguai }
						set_pop_flag = origin_sxx_yuanying_pop_of@root
					}
				}
				every_owned_leader = {
					limit = {
						NOT = { has_leader_flag = sxx_pop_leader }
					}
					sxx_leader_set_state = { STATE = lianqi VAR = 1 }
				}
			}
			origin_sxx_yuhua = {
				random_owned_species = {
					limit = {
						has_trait = trait_sxx_yuhua
					}
					save_global_event_target_as = sxx_yuhua_species_of@root
					event_target:sxx_pool_planet = {
						create_pop = { species = prev }
					}
					last_created_pop = {
						set_pop_flag = sxx_pool_pop_alive
					}
				}
				capital_scope = {
					add_deposit = d_sxx_lingmai_2

					add_building = building_sxx_zongmen_1
					add_building = building_sxx_stones_mine_2
					
					sxx_planet_add_main_species_state_pop = { COUNT = 3 STATE = lianqi STATE_VALUE = 1 }
					every_owned_pop = {
						limit = {
							is_variable_set = sxx_pop_state
						}
						modify_species = {
							species = this
							add_trait = trait_sxx_linggen
						}
					}
				}
				add_modifier = { modifier = sxx_lianqi_country }
				random_owned_leader = {
					limit = {
						is_ruler = yes
						NOT = { has_leader_flag = sxx_pop_leader }
					}
					sxx_leader_set_state = { STATE = lianqi VAR = 1 }
				}
				while = {
					count = 2
					random_owned_leader = {
						limit = {
							is_ruler = no
							NOT = { has_leader_flag = sxx_pop_leader }
						}
						sxx_leader_set_state = { STATE = lianqi VAR = 1 }
					}
				}
			}
			origin_sxx_system = {
				add_modifier = { modifier = sxx_zhuji_country }
				capital_scope = {
					add_deposit = d_sxx_lingmai_1

					add_building = building_sxx_zongmen_2
					add_building = building_sxx_stones_mine_1

					sxx_planet_add_main_species_state_pop = { COUNT = 10 STATE = lianqi STATE_VALUE = 1 }
					sxx_planet_add_main_species_state_pop = { STATE = zhuji STATE_VALUE = 2 }
				}
				random_owned_leader = {
					limit = {
						is_ruler = yes
						NOT = { has_leader_flag = sxx_pop_leader }
					}
					sxx_leader_set_state = { STATE = zhuji VAR = 2 }
				}
				every_owned_leader = {
					limit = {
						is_ruler = no
						NOT = { has_leader_flag = sxx_pop_leader }
					}
					sxx_leader_set_state = { STATE = lianqi VAR = 1 }
				}
				country_event = { id = sxx_origin_system.1000 days = 10 }
			}
			origin_sxx_evil_invasion = {
				add_resource = {
					sxx_stones = 99800
					sxx_pills = 10000
					#sxx_gongfa = 10000
				}
				capital_scope = {
					add_deposit = d_sxx_lingmai_4
					add_building = building_sxx_stones_mine_4
					add_building = building_sxx_xuemingbei
				}
				random_owned_leader = {
					limit = {
						is_ruler = yes
						NOT = { has_leader_flag = sxx_pop_leader }
					}
					sxx_leader_set_state = { STATE = huashen VAR = 5 }
				}
				every_owned_leader = {
					limit = {
						is_ruler = no
						NOT = { has_leader_flag = sxx_pop_leader }
					}
					sxx_leader_set_state = { STATE = yuanying VAR = 4 }
				}
			}
			default = {
				capital_scope = {
					add_deposit = d_sxx_lingmai_2

					add_building = building_sxx_zongmen_1
					add_building = building_sxx_stones_mine_2
					
					sxx_planet_add_main_species_state_pop = { COUNT = 3 STATE = lianqi STATE_VALUE = 1 }
				}
				add_modifier = { modifier = sxx_lianqi_country }
				random_owned_leader = {
					limit = {
						is_ruler = yes
						NOT = { has_leader_flag = sxx_pop_leader }
					}
					sxx_leader_set_state = { STATE = lianqi VAR = 1 }
				}
				while = {
					count = 2
					random_owned_leader = {
						limit = {
							is_ruler = no
							NOT = { has_leader_flag = sxx_pop_leader }
						}
						sxx_leader_set_state = { STATE = lianqi VAR = 1 }
					}
				}
			}
		}

		capital_scope = {
			add_deposit = d_sxx_lingtian
			add_deposit = d_sxx_mijing

			add_building = building_sxx_shengxiantai
		}

		# 默认初始经验
		every_owned_pop = {
			limit = {
				is_variable_set = sxx_pop_state
			}
			if = {
				limit = {
					is_sxx_top_1_state = yes
				}
				set_variable = { which = sxx_pop_xp value = value:sxx_pop_xp_max }
				random_list = {
					1 = { multiply_variable = { which = sxx_pop_xp value = 0.3 } }
					2 = { multiply_variable = { which = sxx_pop_xp value = 0.2 } }
					4 = { multiply_variable = { which = sxx_pop_xp value = 0.1 } }
					8 = { multiply_variable = { which = sxx_pop_xp value = 0 } }
				}
			}
			else = {
				set_variable = { which = sxx_pop_xp value = value:sxx_pop_xp_max }
				random_list = {
					1 = {}
					2 = { multiply_variable = { which = sxx_pop_xp value = 0.9 } }
					3 = { multiply_variable = { which = sxx_pop_xp value = 0.8 } }
					4 = { multiply_variable = { which = sxx_pop_xp value = 0.7 } }
					5 = { multiply_variable = { which = sxx_pop_xp value = 0.6 } }
					6 = { multiply_variable = { which = sxx_pop_xp value = 0.5 } }
					7 = { multiply_variable = { which = sxx_pop_xp value = 0.4 } }
					8 = { multiply_variable = { which = sxx_pop_xp value = 0.3 } }
					9 = { multiply_variable = { which = sxx_pop_xp value = 0.2 } }
					10 = { multiply_variable = { which = sxx_pop_xp value = 0.1 } }
					11 = { multiply_variable = { which = sxx_pop_xp value = 0 } }
				}
			}
		}
	}
}

################################ 羽化登仙 ####################################

# 首次羽化
country_event = {
	id = sxx_origin.7
	title = sxx_origin.7.name
	desc = sxx_origin.7.desc
	is_triggered_only = yes
	picture = GFX_evt_disease_outbreak
	show_sound = event_screams

	trigger = {
		NOT = { has_country_flag = sxx_yuhua_broke }
	}

	immediate = {
		set_country_flag = sxx_yuhua_broke
	}

	option = {
		name = sxx_origin.7.a
	}
	option = {
		name = sxx_origin.7.b
	}
}

################################ 元婴老怪 ####################################

# 元婴老怪爆功法
country_event = {
	id = sxx_origin.10
	title = TRANSMISSION
	desc = sxx_origin.10.desc
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		room = no_video_feed_room
	}

	trigger = {
		has_origin = origin_sxx_yuanying
		any_owned_pop = { has_pop_flag = origin_sxx_yuanying_pop_of@root }
	}

	immediate = {
		remove_modifier = sxx_lianqi_country
		remove_modifier = sxx_zhuji_country
		remove_modifier = sxx_jindan_country
		random_owned_pop = {
			limit = {
				has_pop_flag = origin_sxx_yuanying_pop_of@root
			}
			remove_modifier = sxx_pop_yuanyinglaiguai
		}
		add_modifier = { modifier = sxx_yuanying_country }
	}

	after = {
		tooltip = {
			add_modifier = { modifier = sxx_yuanying_country }
		}
		add_modifier = { modifier = sxx_freedom days = 3600 }
		add_resource = {
			influence = 200
			sxx_gongfa = 1000
		}
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
		}
	}

	option = {
		name = sxx_origin.10.a
	}
	option = {
		name = sxx_origin.10.b
	}
}

################################ 神弃一族 ####################################

@sxx_abg_pop_dead_year_1_1 = 8
@sxx_abg_pop_dead_year_2_1 = 12
@sxx_abg_pop_dead_year_3_1 = 16
@sxx_abg_pop_dead_year_4_1 = 20
@sxx_abg_pop_dead_year_5_1 = 24
@sxx_abg_pop_dead_year_6_1 = 28
@sxx_abg_pop_dead_year_7_1 = 32
@sxx_abg_pop_dead_year_8_1 = 36
@sxx_abg_pop_dead_year_9_1 = 40
@sxx_abg_pop_dead_year_1_2 = 14
@sxx_abg_pop_dead_year_2_2 = 21
@sxx_abg_pop_dead_year_3_2 = 28
@sxx_abg_pop_dead_year_4_2 = 35
@sxx_abg_pop_dead_year_5_2 = 42
@sxx_abg_pop_dead_year_6_2 = 49
@sxx_abg_pop_dead_year_7_2 = 56
@sxx_abg_pop_dead_year_8_2 = 63
@sxx_abg_pop_dead_year_9_2 = 70
@sxx_abg_pop_dead_year_1_3 = 18
@sxx_abg_pop_dead_year_2_3 = 27
@sxx_abg_pop_dead_year_3_3 = 36
@sxx_abg_pop_dead_year_4_3 = 45
@sxx_abg_pop_dead_year_5_3 = 54
@sxx_abg_pop_dead_year_6_3 = 63
@sxx_abg_pop_dead_year_7_3 = 72
@sxx_abg_pop_dead_year_8_3 = 81
@sxx_abg_pop_dead_year_9_3 = 90
@sxx_abg_pop_dead_year_1_4 = 20
@sxx_abg_pop_dead_year_2_4 = 30
@sxx_abg_pop_dead_year_3_4 = 40
@sxx_abg_pop_dead_year_4_4 = 50
@sxx_abg_pop_dead_year_5_4 = 60
@sxx_abg_pop_dead_year_6_4 = 70
@sxx_abg_pop_dead_year_7_4 = 80
@sxx_abg_pop_dead_year_8_4 = 90
@sxx_abg_pop_dead_year_9_4 = 100

# 神弃人口死亡判定
event = {
	id = sxx_origin.20
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# 不用every_galaxy_pop,可能会崩溃？
		every_country = {
			limit = {
				any_owned_pop = {
					is_variable_set = sxx_pop_state
					has_trait = trait_sxx_abg
				}
			}
			every_owned_pop = {
				limit = {
					is_variable_set = sxx_pop_state
					has_trait = trait_sxx_abg
				}
				change_variable = { which = sxx_abg_pop_years value = 1 }
				switch = {
					trigger = has_pop_flag
					sxx_lianqi = {
						if = {
							limit = {
								switch = {
									trigger = has_global_flag
									sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_1_1 } }
									sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_1_2 } }
									sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_1_3 } }
									sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_1_4 } }
									default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_1_2 } }
								}
							}
							pop_event = { id = sxx_origin.25 days = 1 random = 359 }
						}
					}
					sxx_zhuji = {
						if = {
							limit = {
								switch = {
									trigger = has_global_flag
									sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_2_1 } }
									sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_2_2 } }
									sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_2_3 } }
									sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_2_4 } }
									default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_2_2 } }
								}
							}
							pop_event = { id = sxx_origin.25 days = 1 random = 359 }
						}
					}
					sxx_jindan = {
						if = {
							limit = {
								switch = {
									trigger = has_global_flag
									sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_3_1 } }
									sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_3_2 } }
									sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_3_3 } }
									sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_3_4 } }
									default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_3_2 } }
								}
							}
							pop_event = { id = sxx_origin.25 days = 1 random = 359 }
						}
					}
					sxx_yuanying = {
						if = {
							limit = {
								switch = {
									trigger = has_global_flag
									sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_4_1 } }
									sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_4_2 } }
									sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_4_3 } }
									sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_4_4 } }
									default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_4_2 } }
								}
							}
							pop_event = { id = sxx_origin.25 days = 1 random = 359 }
						}
					}
					sxx_huashen = {
						if = {
							limit = {
								switch = {
									trigger = has_global_flag
									sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_5_1 } }
									sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_5_2 } }
									sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_5_3 } }
									sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_5_4 } }
									default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_5_2 } }
								}
							}
							pop_event = { id = sxx_origin.25 days = 1 random = 359 }
						}
					}
					sxx_lianxu = {
						if = {
							limit = {
								switch = {
									trigger = has_global_flag
									sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_6_1 } }
									sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_6_2 } }
									sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_6_3 } }
									sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_6_4 } }
									default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_6_2 } }
								}
							}
							pop_event = { id = sxx_origin.25 days = 1 random = 359 }
						}
					}
					sxx_heti = {
						if = {
							limit = {
								switch = {
									trigger = has_global_flag
									sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_7_1 } }
									sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_7_2 } }
									sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_7_3 } }
									sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_7_4 } }
									default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_7_2 } }
								}
							}
							pop_event = { id = sxx_origin.25 days = 1 random = 359 }
						}
					}
					sxx_dacheng = {
						if = {
							limit = {
								switch = {
									trigger = has_global_flag
									sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_8_1 } }
									sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_8_2 } }
									sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_8_3 } }
									sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_8_4 } }
									default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_8_2 } }
								}
							}
							pop_event = { id = sxx_origin.25 days = 1 random = 359 }
						}
					}
					sxx_dujie = {
						if = {
							limit = {
								switch = {
									trigger = has_global_flag
									sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_9_1 } }
									sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_9_2 } }
									sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_9_3 } }
									sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_9_4 } }
									default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_9_2 } }
								}
							}
							pop_event = { id = sxx_origin.25 days = 1 random = 359 }
						}
					}
				}
			}
		}
	}
}

# 神弃人口死亡
pop_event = {
	id = sxx_origin.25
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_variable_set = sxx_pop_state
		has_trait = trait_sxx_abg
		switch = {
			trigger = has_pop_flag
			sxx_lianqi = {
				switch = {
					trigger = has_global_flag
					sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_1_1 } }
					sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_1_2 } }
					sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_1_3 } }
					sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_1_4 } }
					default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_1_2 } }
				}
			}
			sxx_zhuji = {
				switch = {
					trigger = has_global_flag
					sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_2_1 } }
					sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_2_2 } }
					sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_2_3 } }
					sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_2_4 } }
					default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_2_2 } }
				}
			}
			sxx_jindan = {
				switch = {
					trigger = has_global_flag
					sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_3_1 } }
					sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_3_2 } }
					sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_3_3 } }
					sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_3_4 } }
					default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_3_2 } }
				}
			}
			sxx_yuanying = {
				switch = {
					trigger = has_global_flag
					sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_4_1 } }
					sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_4_2 } }
					sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_4_3 } }
					sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_4_4 } }
					default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_4_2 } }
				}
			}
			sxx_huashen = {
				switch = {
					trigger = has_global_flag
					sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_5_1 } }
					sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_5_2 } }
					sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_5_3 } }
					sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_5_4 } }
					default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_5_2 } }
				}
			}
			sxx_lianxu = {
				switch = {
					trigger = has_global_flag
					sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_6_1 } }
					sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_6_2 } }
					sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_6_3 } }
					sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_6_4 } }
					default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_6_2 } }
				}
			}
			sxx_heti = {
				switch = {
					trigger = has_global_flag
					sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_7_1 } }
					sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_7_2 } }
					sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_7_3 } }
					sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_7_4 } }
					default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_7_2 } }
				}
			}
			sxx_dacheng = {
				switch = {
					trigger = has_global_flag
					sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_8_1 } }
					sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_8_2 } }
					sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_8_3 } }
					sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_8_4 } }
					default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_8_2 } }
				}
			}
			sxx_dujie = {
				switch = {
					trigger = has_global_flag
					sxx_break_level_1 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_9_1 } }
					sxx_break_level_2 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_9_2 } }
					sxx_break_level_3 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_9_3 } }
					sxx_break_level_4 = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_9_4 } }
					default = { check_variable = { which = sxx_abg_pop_years value >= @sxx_abg_pop_dead_year_9_2 } }
				}
			}
		}
	}

	immediate = {
		every_galaxy_fleet = {
			limit = {
				any_owned_ship = { is_ship_size = sxx_cultivator }
			}
			every_owned_ship = {
				limit = {
					is_ship_size = sxx_cultivator
				}
				root = {
					if = {
						limit = { has_pop_flag = sxx_cultivator_of@prev }
						prev = {
							sxx_ship_unassign_one_ship_fleet_leader = yes
							destroy_ship = this
						}
					}
				}
			}
		}
		sxx_pop_die_and_become_yuhuaxian_if_possible = yes # 变船的人口不会变僵尸
	}
}

# 神弃领袖死亡判定
event = {
	id = sxx_origin.30
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_country = {
			every_owned_leader = {
				limit = {
					species = { has_trait = trait_sxx_abg }
				}
				change_variable = { which = sxx_abg_leader_years value = 1 }
				species = {
					switch = {
						trigger = has_trait
						trait_sxx_lianqi = {
							prev = {
								if = {
									limit = {
										switch = {
											trigger = has_global_flag
											sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_1_1 } }
											sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_1_2 } }
											sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_1_3 } }
											sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_1_4 } }
											default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_1_2 } }
										}
									}
									leader_event = { id = sxx_origin.35 days = 1 random = 359 }
								}
							}
						}
						trait_sxx_zhuji = {
							prev = {
								if = {
									limit = {
										switch = {
											trigger = has_global_flag
											sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_2_1 } }
											sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_2_2 } }
											sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_2_3 } }
											sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_2_4 } }
											default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_2_2 } }
										}
									}
									leader_event = { id = sxx_origin.35 days = 1 random = 359 }
								}
							}
						}
						trait_sxx_jindan = {
							prev = {
								if = {
									limit = {
										switch = {
											trigger = has_global_flag
											sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_3_1 } }
											sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_3_2 } }
											sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_3_3 } }
											sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_3_4 } }
											default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_3_2 } }
										}
									}
									leader_event = { id = sxx_origin.35 days = 1 random = 359 }
								}
							}
						}
						trait_sxx_yuanying = {
							prev = {
								if = {
									limit = {
										switch = {
											trigger = has_global_flag
											sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_4_1 } }
											sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_4_2 } }
											sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_4_3 } }
											sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_4_4 } }
											default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_4_2 } }
										}
									}
									leader_event = { id = sxx_origin.35 days = 1 random = 359 }
								}
							}
						}
						trait_sxx_huashen = {
							prev = {
								if = {
									limit = {
										switch = {
											trigger = has_global_flag
											sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_5_1 } }
											sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_5_2 } }
											sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_5_3 } }
											sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_5_4 } }
											default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_5_2 } }
										}
									}
									leader_event = { id = sxx_origin.35 days = 1 random = 359 }
								}
							}
						}
						trait_sxx_lianxu = {
							prev = {
								if = {
									limit = {
										switch = {
											trigger = has_global_flag
											sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_6_1 } }
											sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_6_2 } }
											sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_6_3 } }
											sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_6_4 } }
											default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_6_2 } }
										}
									}
									leader_event = { id = sxx_origin.35 days = 1 random = 359 }
								}
							}
						}
						trait_sxx_heti = {
							prev = {
								if = {
									limit = {
										switch = {
											trigger = has_global_flag
											sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_7_1 } }
											sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_7_2 } }
											sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_7_3 } }
											sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_7_4 } }
											default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_7_2 } }
										}
									}
									leader_event = { id = sxx_origin.35 days = 1 random = 359 }
								}
							}
						}
						trait_sxx_dacheng = {
							prev = {
								if = {
									limit = {
										switch = {
											trigger = has_global_flag
											sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_8_1 } }
											sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_8_2 } }
											sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_8_3 } }
											sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_8_4 } }
											default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_8_2 } }
										}
									}
									leader_event = { id = sxx_origin.35 days = 1 random = 359 }
								}
							}
						}
						trait_sxx_dujie = {
							prev = {
								if = {
									limit = {
										switch = {
											trigger = has_global_flag
											sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_9_1 } }
											sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_9_2 } }
											sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_9_3 } }
											sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_9_4 } }
											default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_9_2 } }
										}
									}
									leader_event = { id = sxx_origin.35 days = 1 random = 359 }
								}
							}
						}
					}
				}
			}
		}
	}
}

# 神弃领袖死亡
leader_event = {
	id = sxx_origin.35
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		species = {
			has_trait = trait_sxx_abg
			switch = {
				trigger = has_trait
				trait_sxx_lianqi = {
					prev = {
						switch = {
							trigger = has_global_flag
							sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_1_1 } }
							sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_1_2 } }
							sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_1_3 } }
							sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_1_4 } }
							default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_1_2 } }
						}
					}
				}
				trait_sxx_zhuji = {
					prev = {
						switch = {
							trigger = has_global_flag
							sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_2_1 } }
							sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_2_2 } }
							sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_2_3 } }
							sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_2_4 } }
							default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_2_2 } }
						}
					}
				}
				trait_sxx_jindan = {
					prev = {
						switch = {
							trigger = has_global_flag
							sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_3_1 } }
							sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_3_2 } }
							sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_3_3 } }
							sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_3_4 } }
							default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_3_2 } }
						}
					}
				}
				trait_sxx_yuanying = {
					prev = {
						switch = {
							trigger = has_global_flag
							sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_4_1 } }
							sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_4_2 } }
							sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_4_3 } }
							sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_4_4 } }
							default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_4_2 } }
						}
					}
				}
				trait_sxx_huashen = {
					prev = {
						switch = {
							trigger = has_global_flag
							sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_5_1 } }
							sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_5_2 } }
							sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_5_3 } }
							sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_5_4 } }
							default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_5_2 } }
						}
					}
				}
				trait_sxx_lianxu = {
					prev = {
						switch = {
							trigger = has_global_flag
							sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_6_1 } }
							sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_6_2 } }
							sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_6_3 } }
							sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_6_4 } }
							default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_6_2 } }
						}
					}
				}
				trait_sxx_heti = {
					prev = {
						switch = {
							trigger = has_global_flag
							sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_7_1 } }
							sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_7_2 } }
							sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_7_3 } }
							sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_7_4 } }
							default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_7_2 } }
						}
					}
				}
				trait_sxx_dacheng = {
					prev = {
						switch = {
							trigger = has_global_flag
							sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_8_1 } }
							sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_8_2 } }
							sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_8_3 } }
							sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_8_4 } }
							default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_8_2 } }
						}
					}
				}
				trait_sxx_dujie = {
					prev = {
						switch = {
							trigger = has_global_flag
							sxx_break_level_1 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_9_1 } }
							sxx_break_level_2 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_9_2 } }
							sxx_break_level_3 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_9_3 } }
							sxx_break_level_4 = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_9_4 } }
							default = { check_variable = { which = sxx_abg_leader_years value >= @sxx_abg_pop_dead_year_9_2 } }
						}
					}
				}
			}
		}
	}

	immediate = {
		kill_leader = { show_notification = yes }
	}
}

# 神弃之终
country_event = {
	id = sxx_origin.40
	title = sxx_origin.40.name
	desc = sxx_origin.40.desc
	picture = GFX_evt_vortex
	show_sound = event_celebration

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = sxx_abg_curse_released }
	}

	immediate = {
		set_country_flag = sxx_abg_curse_released
	}

	after = {
		add_modifier = { modifier = sxx_abg_curse_released_modifier days = 3600 }
		hidden_effect = {
			owner_main_species = {
				every_galaxy_species = {
					limit = {
						is_same_species = prev
						has_trait = trait_sxx_abg
					}
					change_species_characteristics = {
						remove_trait = trait_sxx_abg
						add_trait = trait_sxx_abg_released
					}
				}
			}
			every_country = {
				every_owned_leader = {
					limit = {
						species = {
							is_same_species = root.owner_main_species
							has_trait = trait_sxx_abg
						}
					}
					modify_species = {
						species = this
						remove_trait = trait_sxx_abg
						add_trait = trait_sxx_abg_released
					}
				}
				every_pool_leader = {
					limit = {
						species = {
							is_same_species = root.owner_main_species
							has_trait = trait_sxx_abg
						}
					}
					modify_species = {
						species = this
						remove_trait = trait_sxx_abg
						add_trait = trait_sxx_abg_released
					}
				}
			}
		}
	}

	option = {
		name = sxx_origin.40.a
	}
	option = {
		name = sxx_origin.40.b
	}
}

# 无敌世间
country_event = {
	id = sxx_origin.50
	hide_window = yes

	fire_only_once = yes

	is_triggered_only = yes

	immediate = {
		every_country = {
			limit = {
				has_origin = origin_sxx_invincible
			}
			country_event = { id = sxx_origin.51 }
		}
	}
}

# 无敌世间
country_event = {
	id = sxx_origin.51
	title = sxx_origin.51.name
	desc = sxx_origin.51.desc
	picture = GFX_evt_vortex
	show_sound = event_super_explosion

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		has_origin = origin_sxx_invincible
	}

	immediate = {
		set_update_modifiers_batch = begin
		every_system = { destroy_star_system = yes }
		set_update_modifiers_batch = end
		win = yes
	}

	option = {
		name = OK
	}
}

# 古天庭真仙
country_event = {
	id = sxx_origin.60
	title = TRANSMISSION
	desc = sxx_origin.60.desc
	is_triggered_only = yes
	location = event_target:sxx_old_heaven

	diplomatic = yes

	trigger = {
		is_sxx_final_country = no
	}

	picture_event_data = {
		room = no_video_feed_room
	}

	option = {
		name = sxx_origin.60.a
		response_text = sxx_origin.60.a.response
		is_dialog_only = yes
	}
	option = {
		name = sxx_origin.60.b
		response_text = sxx_origin.60.b.response
		is_dialog_only = yes
	}
	option = {
		name = sxx_origin.60.c
		response_text = sxx_origin.60.c.response
		is_dialog_only = yes
	}
	option = {
		name = sxx_origin.60.d
		response_text = sxx_origin.60.d.response
		default_hide_option = yes
		set_country_flag = sxx_country_can_use_qiyun
		set_country_flag = sxx_country_get_old_zhenxian
		#add_resource = {
		#	sxx_gongfa = 10000
		#}
		hidden_effect = {
			#country_event = { id = sxx_origin.65 days = 7200 random = 3600 }
			event_target:sxx_old_heaven = {
				set_owner = root

				add_district = district_sxx_heaven_tanlang
				add_district = district_sxx_heaven_lucun
				add_district = district_sxx_heaven_lianzhen
				add_district = district_sxx_heaven_wenqu
				add_district = district_sxx_heaven_wuqu
				add_district = district_sxx_heaven_pojun
				add_district = district_sxx_heaven_jumen
				add_building = building_sxx_lingxiao
				add_building = building_sxx_tianmen
				add_building = building_sxx_tianzhu
				add_building = building_sxx_tianzhu
				add_building = building_sxx_tianzhu
				add_building = building_sxx_tianzhu
				#ruin_building = building_sxx_lingxiao
				ruin_building = building_sxx_tianmen
				ruin_building = building_sxx_tianzhu
				ruin_building = building_sxx_tianzhu
				ruin_building = building_sxx_tianzhu
				ruin_building = building_sxx_tianzhu

				sxx_planet_add_main_species_state_pop = { STATE = zhenxian STATE_VALUE = 10 }
				last_created_pop = {
					pop_event = { id = sxx_origin.70 days = 360 random = 360 }
				}
				sxx_planet_add_main_species_state_pop = { STATE = zhenxian STATE_VALUE = 10 }
				last_created_pop = {
					pop_event = { id = sxx_origin.71 days = 360 random = 360 }
				}
				sxx_planet_add_main_species_state_pop = { STATE = zhenxian STATE_VALUE = 10 }
				last_created_pop = {
					pop_event = { id = sxx_origin.72 days = 360 random = 360 }
				}
				sxx_planet_add_main_species_state_pop = { STATE = zhenxian STATE_VALUE = 10 }
				last_created_pop = {
					pop_event = { id = sxx_origin.73 days = 360 random = 360 }
				}
				sxx_planet_add_main_species_state_pop = { STATE = zhenxian STATE_VALUE = 10 }
				last_created_pop = {
					pop_event = { id = sxx_origin.74 days = 360 random = 360 }
				}
				sxx_planet_add_main_species_state_pop = { STATE = zhenxian STATE_VALUE = 10 }
				last_created_pop = {
					pop_event = { id = sxx_origin.75 days = 360 random = 360 }
				}
				sxx_planet_add_main_species_state_pop = { STATE = zhenxian STATE_VALUE = 10 }
				last_created_pop = {
					pop_event = { id = sxx_origin.76 days = 360 random = 360 }
				}
				every_owned_pop = {
					set_pop_flag = sxx_old_heaven_zhenxian
					add_modifier = { modifier = sxx_fairy_pop_will_die }
				}
			}
		}
	}
}

# 古天庭真仙给功法
country_event = {
	id = sxx_origin.65
	title = TRANSMISSION
	desc = sxx_origin.65.desc
	is_triggered_only = yes

	diplomatic = yes

	trigger = {
		any_owned_pop = {
			has_pop_flag = sxx_old_heaven_zhenxian
		}
	}

	picture_event_data = {
		room = no_video_feed_room
	}

	after = {
		add_resource = {
			sxx_gongfa = 100000
		}
	}

	option = {
		name = sxx_origin.65.a
	}
}

# 古天庭真仙死亡
pop_event = {
	id = sxx_origin.70
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				owner = {
					OR = {
						NOT = { has_country_flag = sxx_country_get_old_zhenxian }
						is_sxx_jindan_country = yes
					}
				}
			}
			if = {
				limit = {
					owner = {
						has_country_flag = sxx_country_get_old_zhenxian
					}
				}
				owner = { country_event = { id = sxx_origin.80 } }
			}
			kill_pop = yes
		}
		else = {
			pop_event = { id = sxx_origin.70 days = 720 }
		}
	}
}

pop_event = {
	id = sxx_origin.71
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				owner = {
					OR = {
						NOT = { has_country_flag = sxx_country_get_old_zhenxian }
						is_sxx_yuanying_country = yes
					}
				}
			}
			if = {
				limit = {
					owner = {
						has_country_flag = sxx_country_get_old_zhenxian
					}
				}
				owner = { country_event = { id = sxx_origin.80 } }
			}
			kill_pop = yes
		}
		else = {
			pop_event = { id = sxx_origin.71 days = 720 }
		}
	}
}

pop_event = {
	id = sxx_origin.72
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				owner = {
					OR = {
						NOT = { has_country_flag = sxx_country_get_old_zhenxian }
						is_sxx_huashen_country = yes
					}
				}
			}
			if = {
				limit = {
					owner = {
						has_country_flag = sxx_country_get_old_zhenxian
					}
				}
				owner = { country_event = { id = sxx_origin.80 } }
			}
			kill_pop = yes
		}
		else = {
			pop_event = { id = sxx_origin.72 days = 720 }
		}
	}
}

pop_event = {
	id = sxx_origin.73
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				owner = {
					OR = {
						NOT = { has_country_flag = sxx_country_get_old_zhenxian }
						is_sxx_lianxu_country = yes
					}
				}
			}
			if = {
				limit = {
					owner = {
						has_country_flag = sxx_country_get_old_zhenxian
					}
				}
				owner = { country_event = { id = sxx_origin.80 } }
			}
			kill_pop = yes
		}
		else = {
			pop_event = { id = sxx_origin.73 days = 720 }
		}
	}
}

pop_event = {
	id = sxx_origin.74
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				owner = {
					OR = {
						NOT = { has_country_flag = sxx_country_get_old_zhenxian }
						is_sxx_heti_country = yes
					}
				}
			}
			if = {
				limit = {
					owner = {
						has_country_flag = sxx_country_get_old_zhenxian
					}
				}
				owner = { country_event = { id = sxx_origin.80 } }
			}
			kill_pop = yes
		}
		else = {
			pop_event = { id = sxx_origin.74 days = 720 }
		}
	}
}

pop_event = {
	id = sxx_origin.75
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				owner = {
					OR = {
						NOT = { has_country_flag = sxx_country_get_old_zhenxian }
						is_sxx_dacheng_country = yes
					}
				}
			}
			if = {
				limit = {
					owner = {
						has_country_flag = sxx_country_get_old_zhenxian
					}
				}
				owner = { country_event = { id = sxx_origin.80 } }
			}
			kill_pop = yes
		}
		else = {
			pop_event = { id = sxx_origin.75 days = 720 }
		}
	}
}

pop_event = {
	id = sxx_origin.76
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				owner = {
					OR = {
						NOT = { has_country_flag = sxx_country_get_old_zhenxian }
						is_sxx_dujie_country = yes
					}
				}
			}
			if = {
				limit = {
					owner = {
						has_country_flag = sxx_country_get_old_zhenxian
					}
				}
				owner = {
					country_event = { id = sxx_origin.80 }
					country_event = { id = sxx_origin.85 days = 1 }
				}
			}
			kill_pop = yes
		}
		else = {
			pop_event = { id = sxx_origin.76 days = 720 }
		}
	}
}

# 古天庭真仙死亡弹窗
country_event = {
	id = sxx_origin.80
	title = sxx_origin.80.name
	desc = sxx_origin.80.desc
	picture = GFX_evt_zro_4
	show_sound = event_life_support_fail
	is_triggered_only = yes

	trigger = {
		any_owned_pop = {
			has_pop_flag = sxx_old_heaven_zhenxian
		}
	}

	after = {
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
		}
	}

	option = {
		name = sxx_origin.80.a
	}
	option = {
		name = sxx_origin.80.b
	}
}

country_event = {
	id = sxx_origin.85
	title = sxx_origin.85.name
	desc = sxx_origin.85.desc
	picture = GFX_evt_vortex
	show_sound = event_mind_over_matter
	is_triggered_only = yes

	trigger = {
		NOT = { has_modifier = sxx_heaven_fall_last_gift }
	}

	after = {
		add_modifier = { modifier = sxx_heaven_fall_last_gift }
	}

	option = {
		name = sxx_origin.85.a
	}
}